<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <title></title>
    <link href="upload.css" rel="stylesheet" />
  </head>
  <body>
    <div id="center">
      <div id="header">NODE.JS</div>
      <div id="container">
        <div id="upload">파일 업로드</div>
        <div id="input_box">
          <form method="post" enctype="'multipart/form-data'" action="chart.html">
            <div class="button3">
              <label for="chooseFile">
                <img class="arrowup_icon" src="./image/ArrowUpIcon.png" alt="icon" />
              </label>
            </div>
            <input type="file" id="chooseFile" name="chooseFile" accept="text/plain" onchange="loadFile(this)"">
          
          <div class="circle"></div>
        </div>
        <div id="button_box">
          
          <button class="button1" value="업로드" >업로드</button>  
        </form>       
          <!-- <button class="button1" value="업로드">업로드</button> -->
          <button class="button2" value="삭제">삭제</button>
        </div>
        
        <div class="historyDiv">
          <h3>기존 파일 목록</h3>
          <form action="/chart" method="get">
            <div class="historyList">
              <ul>
                {% for table in showTable %}
                <li>
                  <input type="radio" id="{{ table }}" name="tables" value="{{ table }}" required>
                  <label for="{{ table }}">{{ table }}</label>
                </li>
                {% endfor %}
              </ul>
            </div>
            <button type="submit">불러오기</button>
            <button type="button" onclick="dropTable(document.querySelector('input[name=\'tables\']:checked').value)">삭제</button>
          </form>          
        </div>

      </div>
    </div>
    <script type="text/javascript" src="app.js"></script>
    <script>
      function dropTable(value) {
        const queryString = `tables=${value}`;
        const isDrop = confirm(value+" 파일을 정말로 지우시겠습니까?");
        if(isDrop){
          location.href = `/?${queryString}`;
        }
      }
    </script>

    
  </body>
</html>
